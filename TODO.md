# 랜덤박스 이벤트 프로젝트 TODO 리스트

이 문서는 프로젝트의 상세한 요구사항과 진행 상황을 관리합니다.

## 📌 주요 요구사항 (User Story)

-   **이벤트 흐름**: 고객이 리뷰 작성 후 카카오채널로 인증하면, 직원이 확인 후 **참여 코드**가 포함된 이벤트 링크를 전달합니다. 고객은 이 링크를 통해 이벤트에 1회 참여할 수 있습니다.
-   **애니메이션 시퀀스**:
    1.  **초기 화면**: 상자와 뚜껑이 분리된 채 열려 있고, 상품 이미지들이 주변에 떠 다닙니다.
    2.  **참여**: 사용자가 '참여 코드'를 입력하고 '참여하기' 버튼을 클릭합니다.
    3.  **상품 입장**: 상품 이미지들이 1등부터 5등까지 순서대로 상자 안으로 들어갑니다.
    4.  **박스 봉인**: 뚜껑이 닫힙니다.
    5.  **박스 확대 및 흔들림**: 상자가 사용자에게 다가오듯 커지며 좌우로 3회 흔들립니다.
    6.  **개봉**: 상자가 부풀어 오르다 폭죽처럼 터지며, 당첨 상품 이미지와 함께 꽃가루/색종이 효과가 나타납니다.
    7.  **결과 확인**: 당첨 상품 이미지가 중앙에 표시되고 "당첨을 축하드립니다! 상품을 받으시겠습니까?" 메시지가 나타납니다.
    8.  **상품 수령**: '당첨상품 받기!' 버튼을 클릭하면 기프트쇼 API를 통해 쿠폰이 발송되고, "당첨상품이 발송되었습니다! 핸드폰 메시지를 확인해주세요!" 안내가 표시됩니다.
-   **관리자 기능**: 관리자는 대시보드에서 중복 참여를 방지하기 위한 '참여 코드'를 생성하고 관리할 수 있어야 합니다.

---

## ✅ 완료 (Completed)

-   **프로젝트 요구사항 및 아키텍처 최종 확정**
-   **1. 인프라 구축**
    -   Next.js 프로젝트 생성 (`interactive-randombox`)
    -   Prisma 설정 및 SQLite 연동
    -   DB 마이그레이션 완료 (`initial-schema`)
-   **2. 백엔드 API 개발 (기본 골격)**
    -   Hono 프레임워크 설치
    -   `/api/[[...route]]/route.ts` 파일 생성 및 기본 라우트 설정
-   **3. 프론트엔드 개발 (기본 골격)**
    -   `page.tsx` 및 `globals.css` 초기화
-   **4. Lottie 애니메이션 'Big Fashion Festival' 텍스트 숨기기**
    -   `modify_lottie.py` 스크립트를 사용하여 `public/lottie/intro.json` 파일 수정
    -   `loog copy.png` 레이어의 `ks.s` (scale) 속성 중 높이 값을 0으로 설정하여 텍스트 숨기기
    -   불필요한 `Text Cover Layer` 제거

## 🔄 진행 중 (In Progress)

-   **5. 프론트엔드 상세 구현 (Lottie 애니메이션 중심)**
    -   **5.1 초기 화면 UI 구현**:
        -   상자와 뚜껑이 분리된 채 열려 있고, 상품 이미지들이 주변에 떠 다니는 초기 Lottie 애니메이션 상태 구현
        -   참여 코드 입력 필드 및 "참여하기" 버튼 UI 통합
    -   **5.2 애니메이션 시퀀스 구현**:
        -   **단계 1: 상품 입장**: Lottie에서 상품 이미지가 1등부터 5등까지 순서대로 상자 안으로 들어가는 애니메이션 로직 구현
        -   **단계 2: 박스 봉인**: 뚜껑이 닫히는 Lottie 애니메이션 구현
        -   **단계 3: 박스 확대 및 흔들림**: 상자가 사용자에게 다가오듯 커지며 좌우로 3회 흔들리는 Lottie 애니메이션 구현
        -   **단계 4: 개봉**: 상자가 부풀어 오르다 폭죽처럼 터지며, 당첨 상품 이미지와 함께 꽃가루/색종이 효과가 나타나는 Lottie 애니메이션 구현
        -   **단계 5: 결과 확인**: 당첨 상품 이미지가 중앙에 표시되고 "당첨을 축하드립니다! 상품을 받으시겠습니까?" 메시지가 나타나는 UI 구현
        -   **단계 6: 상품 수령**: '당첨상품 받기!' 버튼 클릭 시, 기프트쇼 API 연동 로직 트리거 및 "당첨상품이 발송되었습니다! 핸드폰 메시지를 확인해주세요!" 안내 표시 UI 구현
    -   **5.3 상태 관리 로직 구현**:
        -   이벤트 진행 상태 (`idle`, `playing`, `finished`) 관리 로직 구현
        -   API 통신 상태 (로딩, 성공, 실패) UI 반영 로직 구현

## 📝 예정 (Upcoming)

-   **6. 백엔드 API 로직 구현**
    -   **6.0 데이터베이스 설정**:
        -   NEON PostgreSQL 데이터베이스로 전환 (개발/프로덕션 환경별 설정)
        -   환경 변수 설정 (.env 파일)
        -   DB 스키마 마이그레이션
    -   **6.1 `/api/participate` API**:
        -   참여 코드 유효성 검증 (DB 조회)
        -   경품 추첨 로직 구현
        -   사용한 참여 코드 및 당첨 결과 DB 업데이트
    -   **6.2 `/api/claim` API**:
        -   당첨자 정보 확인 (이름, 전화번호 등)
        -   기프트쇼 API 연동 (실제 또는 모의)
        -   쿠폰 발송 결과 DB 업데이트

-   **7. 관리자 기능 구현**
    -   **7.1 관리자 인증**:
        -   관리자 로그인을 위한 API 및 페이지 구현
    -   **7.2 참여 코드 관리**:
        -   참여 코드 생성 (단일/대량) API 및 UI 구현
        -   생성된 코드 목록 조회 및 사용 여부 확인 UI 구현

-   **8. 통합 테스트**
    -   전체 이벤트 흐름 E2E 테스트 (참여 코드 입력부터 쿠폰 발송 완료까지)
    -   기프트쇼 API 실제 연동 테스트